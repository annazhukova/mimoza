function formatLink(a){if(a){return"<a href='?id="+a+"' target='_blank'>Zoom inside</a>"}return""}function p(a){return"<p class='popup centre'>"+a+"</p>"}function i(a){return"<span class='explanation'>"+a+"</span>"}function getPopup(l,c,j){if(EDGE==l.properties.type){return}var f="<p class='emph centre'>"+l.properties.name+"</p>"+p(i("id: ")+l.properties.id),h=(0!=(l.properties.layer&TRANSPORT_MASK));if(REACTION==l.properties.type){var d=h?p(i("Is a transport reaction.")):"",b=l.properties.term?p(l.properties.term):"",g=l.properties.f?p(l.properties.f):"";f+=g+b+d}else{if(SPECIES==l.properties.type){var k=h?p(i("Participates in a transport reaction.")):"",a=l.properties.term?p(l.properties.term):"",e=p(i("compartment: ")+l.properties.c_name);if(l.properties.f){f+=p(i("formula: ")+l.properties.f)}f+=e+a+k}else{if(COMPARTMENT==l.properties.type){f+=l.properties.term?p(l.properties.term):"";f+=p(formatLink(l.properties.id))}}}return L.popup({autoPan:true,keepInView:true,maxWidth:c,maxHeight:j,autoPanPadding:[1,1]}).setContent(f)}function getLabel(b){if(EDGE==b.properties.type){return null}var a="<p class='emph centre'>"+b.properties.name+"</p>"+p(i("id: ")+b.properties.id),d=(0!=(b.properties.layer&TRANSPORT_MASK));if(REACTION==b.properties.type){var g=d?p(i("Is a transport reaction.")):"",f=b.properties.f?p(b.properties.f):"";a+=f+g}if(SPECIES==b.properties.type){var e=d?p(i("Participates in a transport reaction.")):"",c=p(i("compartment: ")+b.properties.c_name);a+=c+e}return a}function highlightCircle(b,a){return L.circle(b,a,{color:"#fff700",fillColor:"#fff700",fillOpacity:0.7,opacity:1,weight:2,fill:true,clickable:false})}function search(g,a,f,c){var e=$("#tags_"+c).val();if(e&&a.hasOwnProperty(e)){var d=g.getZoom(),b=f[e];if(b[0]>d){g.setZoom(b[0])}else{if(d>b[1]){g.setZoom(b[1])}}a[e].openOn(g)}}function add(c,a,b){if(c.hasOwnProperty(a)){c[a].push(b)}else{c[a]=[b]}};